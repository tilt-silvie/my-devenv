- hosts: all

  roles:
    - role: gantsign.oh-my-zsh
      users: 
        - username: "{{ ansible_env.USER }}"
    - role: geerlingguy.docker
      become: yes

  tasks:
    - name: gitの設定
      become: yes
      apt: name=git state=latest
    - git_config: name=user.name scope=global value="Makito Ishikura"
    - git_config: name=user.email scope=global value="tilt.silvie@gail.com"
    - git_config: name=color.ui scope=global value=true
    - git_config: name=core.editor scope=global value="vim -c 'set fenc=utf-8'"
    - git_config: name=color.status scope=global value=auto
    - git_config: name=color.branch scope=global value=auto

    - name: install neovim
      become: yes
      apt:
        name: neovim
        update_cache: yes
        state: latest

    - name: create neovim config directory
      file:
        path: ~/.config/nvim
        state: directory
        mode: 0755

    - name: create neovim conf file symlink
      file: 
        src: ~/my-devenv/dotfiles/.vimrc 
        dest: ~/.config/nvim/init.vim
        state: link

    - name: install curl
      become: yes
      apt:
        name: curl
        state: latest

    - name: ホームディレクトリ以下のディレクトリ名を日本語から英語にする
      shell: LANG=C xdg-user-dirs-update --force

    - name: ホームディレクトリ以下に残った日本語ディレクトリを削除する
      file: path={{ item }} state=absent
      with_items:
        - ~/ダウンロード
        - ~/テンプレート
        - ~/デスクトップ
        - ~/ドキュメント
        - ~/ビデオ
        - ~/ピクチャ
        - ~/ミュージック
        - ~/公開

    - name: dotfilesのシンボリックリンクを作成
      file: src=~/my-devenv/dotfiles/.vimrc dest=~/.vimrc state=link
